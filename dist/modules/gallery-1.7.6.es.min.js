var t=Object.defineProperty,e=(e,n,i)=>(((e,n,i)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i})(e,"symbol"!=typeof n?n+"":n,i),i);class n extends HTMLElement{constructor(){super(),e(this,"shadow"),e(this,"currentIndex",0),e(this,"items",[]),e(this,"loadedIndices",new Set),e(this,"preloadDistance",4),e(this,"transitionDuration",300),e(this,"isTransitioning",!1),e(this,"container",null),e(this,"track",null),e(this,"counter",null),e(this,"prevButton",null),e(this,"nextButton",null),this.shadow=this.attachShadow({mode:"open"}),this.render(),this.cacheElements(),this.applyCustomProperties()}connectedCallback(){this.buildGallery(),this.addEventListeners(),this.loadVisibleImages()}disconnectedCallback(){this.removeEventListeners()}static get observedAttributes(){return["pd","td"]}attributeChangedCallback(t,e,n){var i;if("pd"===t&&n){const t=parseInt(n,10);!isNaN(t)&&t>0&&(this.preloadDistance=t,this.loadVisibleImages())}if("td"===t&&n){const t=parseInt(n,10);!isNaN(t)&&t>0&&(this.transitionDuration=t,null==(i=this.track)||i.style.setProperty("transition",`transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`))}}cacheElements(){this.container=this.shadow.querySelector(".gb-gallery-container"),this.track=this.shadow.querySelector(".gb-gallery-track"),this.counter=this.shadow.querySelector(".gb-gallery-counter"),this.prevButton=this.shadow.querySelector(".gb-gallery-nav.prev"),this.nextButton=this.shadow.querySelector(".gb-gallery-nav.next")}render(){const t=document.createElement("style");t.textContent=`\n      .gb-gallery-container {\n        position: relative;\n        width: 100%;\n        max-width: 800px;\n        margin: 0 auto;\n        overflow: hidden;\n        border-radius: 8px;\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      }\n\n      .gb-gallery-track {\n        display: flex;\n        transition: transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94);\n      }\n\n      .gb-gallery-item {\n        min-width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .gb-gallery-item img {\n        max-width: 100%;\n        max-height: 600px;\n        object-fit: contain;\n        transition: opacity 0.3s ease;\n      }\n\n      .gb-gallery-item img.loading {\n        opacity: 0.3;\n        background: #f5f5f5;\n      }\n\n      .gb-gallery-item img.loaded {\n        opacity: 1;\n      }\n\n      .gb-gallery-item img.error {\n        opacity: 1;\n        background: #ffebee;\n        color: #b71c1c;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        min-height: 200px;\n      }\n\n      .gb-gallery-nav {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.5);\n        color: white;\n        border: none;\n        font-size: 24px;\n        padding: 12px 16px;\n        cursor: pointer;\n        transition: background 0.3s;\n        user-select: none;\n        z-index: 10;\n      }\n\n      .gb-gallery-nav:hover {\n        background: rgba(0, 0, 0, 0.8);\n      }\n\n      .gb-gallery-nav:focus {\n        outline: 2px solid rgba(255, 255, 255, 0.8);\n        outline-offset: 2px;\n      }\n\n      .gb-gallery-nav.prev {\n        left: 16px;\n      }\n\n      .gb-gallery-nav.next {\n        right: 16px;\n      }\n\n      .gb-gallery-counter {\n        position: absolute;\n        bottom: 16px;\n        right: 16px;\n        background: rgba(0, 0, 0, 0.5);\n        color: white;\n        padding: 4px 12px;\n        border-radius: 12px;\n        font-size: 14px;\n        z-index: 10;\n      }\n    `;const e=document.createElement("div");e.className="gb-gallery-container",e.innerHTML='\n      <div class="gb-gallery-track"></div>\n      <button class="gb-gallery-nav prev" aria-label="Previous image">‹</button>\n      <button class="gb-gallery-nav next" aria-label="Next image">›</button>\n      <div class="gb-gallery-counter" aria-live="polite"></div>\n    ',this.shadow.append(t,e)}applyCustomProperties(){const t=this.getAttribute("pd"),e=this.getAttribute("td");if(t){const e=parseInt(t,10);!isNaN(e)&&e>0&&(this.preloadDistance=e)}if(e){const t=parseInt(e,10);!isNaN(t)&&t>0&&(this.transitionDuration=t)}}buildGallery(){const t=this.track,e=this.counter;t&&e&&(this.items=Array.from(this.children),t.innerHTML="",this.items.forEach((e,n)=>{const i=document.createElement("div");i.className="gb-gallery-item",i.dataset.index=n.toString();const s=e.cloneNode(!0);if(s instanceof Element){const t="IMG"===s.tagName?s:s.querySelector("img");if(t){const e=t.src;t.src="",t.dataset.src=e,t.classList.add("loading"),t.alt=t.alt||`Image ${n+1}`}}i.appendChild(s),t.appendChild(i)}),this.updateCounter())}addEventListeners(){var t,e,n;null==(t=this.prevButton)||t.addEventListener("click",()=>this.prev()),null==(e=this.nextButton)||e.addEventListener("click",()=>this.next()),null==(n=this.track)||n.addEventListener("transitionend",this.handleTransitionEnd.bind(this)),window.addEventListener("resize",this.handleResize.bind(this)),document.addEventListener("keydown",this.handleKeyDown.bind(this))}removeEventListeners(){var t,e,n;null==(t=this.prevButton)||t.removeEventListener("click",()=>this.prev()),null==(e=this.nextButton)||e.removeEventListener("click",()=>this.next()),null==(n=this.track)||n.removeEventListener("transitionend",this.handleTransitionEnd.bind(this)),window.removeEventListener("resize",this.handleResize.bind(this)),document.removeEventListener("keydown",this.handleKeyDown.bind(this))}handleTransitionEnd(t){t.target===this.track&&this.track&&(this.isTransitioning=!1,0===this.currentIndex&&"translateX(0%)"!==this.track.style.transform&&(this.track.style.transition="none",this.track.style.transform="translateX(0%)",this.track.offsetWidth,this.track.style.transition=`transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`),this.loadVisibleImages())}handleResize(){this.track&&(this.track.style.transition="none",this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,this.track.offsetWidth,this.track.style.transition=`transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,this.loadVisibleImages())}handleKeyDown(t){"ArrowLeft"===t.key?(this.prev(),t.preventDefault()):"ArrowRight"===t.key&&(this.next(),t.preventDefault())}updateGallery(){!this.isTransitioning&&this.track&&(this.isTransitioning=!0,this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,this.updateCounter())}loadVisibleImages(){if(0===this.items.length||!this.track)return;const t=Math.max(0,this.currentIndex-this.preloadDistance),e=Math.min(this.items.length-1,this.currentIndex+this.preloadDistance);for(let n=t;n<=e;n++)this.loadedIndices.has(n)||this.loadImageAtIndex(n)}loadImageAtIndex(t){if(t<0||t>=this.items.length||!this.track)return;const e=this.track.children[t];if(!e)return;const n=e.querySelector("img");if(!n||!n.dataset.src)return;const i=n.dataset.src,s=new Image;s.onload=()=>{n.src=i,n.classList.remove("loading","error"),n.classList.add("loaded"),this.loadedIndices.add(t)},s.onerror=()=>{n.classList.remove("loading"),n.classList.add("error"),n.title="Failed to load image"},s.src=i}unloadImageAtIndex(t){if(t<0||t>=this.items.length||!this.track)return;const e=this.track.children[t];if(!e)return;const n=e.querySelector("img");n&&n.dataset.src&&(n.src="",n.classList.remove("loaded","error"),n.classList.add("loading"),this.loadedIndices.delete(t))}updateCounter(){this.counter&&this.items.length>0&&(this.counter.textContent=`${this.currentIndex+1} / ${this.items.length}`,this.counter.setAttribute("aria-label",`Image ${this.currentIndex+1} of ${this.items.length}`))}prev(){if(this.isTransitioning||this.items.length<=1)return;const t=(this.currentIndex-1+this.items.length)%this.items.length;this.slideToIndex(t,"prev")}next(){if(this.isTransitioning||this.items.length<=1)return;const t=(this.currentIndex+1)%this.items.length;this.slideToIndex(t,"next")}slideToIndex(t,e){if(!this.track)return;("next"===e&&0===t&&this.currentIndex===this.items.length-1||"prev"===e&&t===this.items.length-1&&0===this.currentIndex)&&this.items.length>1?this.handleLoopTransition(t,e):(this.currentIndex=t,this.updateGallery())}handleLoopTransition(t,e){this.track&&("next"===e?(this.currentIndex=this.items.length,this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,setTimeout(()=>{this.track&&(this.track.style.transition="none",this.currentIndex=t,this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,this.track.offsetWidth,this.track.style.transition=`transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,this.isTransitioning=!1,this.updateCounter())},this.transitionDuration)):(this.track.style.transition="none",this.currentIndex=-1,this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,this.track.offsetWidth,this.track.style.transition=`transform ${this.transitionDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94)`,this.currentIndex=t,this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,this.isTransitioning=!0,this.updateCounter()))}goTo(t){if(t>=0&&t<this.items.length&&t!==this.currentIndex&&!this.isTransitioning){const e=t>this.currentIndex?"next":"prev";this.slideToIndex(t,e)}}getCurrentIndex(){return this.currentIndex}}customElements.define("gallery-component",n);
