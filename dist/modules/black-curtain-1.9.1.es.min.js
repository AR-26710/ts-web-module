var e=Object.defineProperty,t=(t,n,s)=>(((t,n,s)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s})(t,"symbol"!=typeof n?n+"":n,s),s);class n extends HTMLElement{constructor(){super(),t(this,"shadow"),t(this,"overlayElement",null),t(this,"isRevealed",!1),t(this,"handleReveal",()=>{this.reveal()}),t(this,"handleHide",()=>{window.matchMedia("(hover: none) and (pointer: coarse)").matches||this.hide()}),t(this,"handleTouchReveal",e=>{e.preventDefault(),this.isRevealed?this.hide():this.reveal()}),t(this,"handleKeyDown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.isRevealed?this.hide():this.reveal())}),this.shadow=this.attachShadow({mode:"open"}),this.render()}static get observedAttributes(){return["color","opacity","speed"]}connectedCallback(){this.setupEventListeners(),this.updateOverlay()}disconnectedCallback(){this.removeEventListeners()}attributeChangedCallback(e,t,n){t!==n&&this.updateOverlay()}render(){const e=document.createElement("style");e.textContent="\n      :host {\n        display: block;\n        position: relative;\n        width: 100%;\n        margin: 12px 0;\n        font-family: inherit;\n        cursor: pointer;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n      }\n\n      :host::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 1;\n        pointer-events: none;\n      }\n\n      .bc-container {\n        position: relative;\n        padding: 16px;\n        border-radius: 8px;\n        background-color: #f8f9fa;\n        border: 1px solid #dee2e6;\n        transition: all var(--bc-reveal-speed, 0.3s) ease;\n        overflow: hidden;\n      }\n\n      .bc-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 2;\n        background-color: var(--bc-overlay-color, #000);\n        opacity: var(--bc-overlay-opacity, 0.9);\n        transition: opacity var(--bc-reveal-speed, 0.3s) ease;\n        pointer-events: none;\n      }\n\n      .bc-overlay.revealed {\n        opacity: 0;\n        pointer-events: none;\n      }\n\n      .bc-content {\n        position: relative;\n        z-index: 1;\n        filter: blur(0);\n        transition: filter var(--bc-reveal-speed, 0.3s) ease;\n      }\n\n      :host(:not(.revealed)) .bc-content {\n        filter: blur(2px);\n      }\n\n      .bc-hint {\n        position: absolute;\n        top: 8px;\n        right: 8px;\n        background: rgba(0, 0, 0, 0.7);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 4px;\n        font-size: 12px;\n        z-index: 3;\n        transition: opacity var(--bc-reveal-speed, 0.3s) ease;\n      }\n\n      .bc-overlay.revealed ~ .bc-hint {\n        opacity: 0;\n      }\n\n      /* 触摸设备优化 */\n      @media (hover: none) and (pointer: coarse) {\n        :host {\n          cursor: default;\n        }\n        \n        .bc-hint::after {\n          content: ' 点击显示';\n        }\n      }\n\n      /* 桌面设备优化 */\n      @media (hover: hover) and (pointer: fine) {\n        .bc-hint::after {\n          content: ' 悬停显示';\n        }\n      }\n\n      /* 无障碍支持 */\n      :host(:focus) {\n        outline: 2px solid #007bff;\n        outline-offset: 2px;\n      }\n\n      /* 暗色模式支持 */\n      @media (prefers-color-scheme: dark) {\n        .bc-container {\n          background-color: #212529;\n          border-color: #495057;\n          color: #f8f9fa;\n        }\n      }\n    ";const t=document.createElement("div");t.className="bc-container";const n=document.createElement("div");n.className="bc-overlay",this.overlayElement=n;const s=document.createElement("div");s.className="bc-hint",s.textContent="👁️";const i=document.createElement("div");i.className="bc-content";const o=document.createElement("slot");i.appendChild(o),t.append(n,s,i),this.shadow.append(e,t)}setupEventListeners(){this.addEventListener("mouseenter",this.handleReveal),this.addEventListener("mouseleave",this.handleHide),this.addEventListener("touchstart",this.handleTouchReveal),this.addEventListener("keydown",this.handleKeyDown),this.setAttribute("tabindex","0"),this.setAttribute("role","button"),this.setAttribute("aria-label","黑幕组件，悬停或点击显示内容")}removeEventListeners(){this.removeEventListener("mouseenter",this.handleReveal),this.removeEventListener("mouseleave",this.handleHide),this.removeEventListener("touchstart",this.handleTouchReveal),this.removeEventListener("keydown",this.handleKeyDown)}reveal(){!this.isRevealed&&this.overlayElement&&(this.isRevealed=!0,this.classList.add("revealed"),this.overlayElement.classList.add("revealed"),this.dispatchEvent(new CustomEvent("bc-reveal",{bubbles:!0,detail:{revealed:!0}})))}hide(){this.isRevealed&&this.overlayElement&&(this.isRevealed=!1,this.classList.remove("revealed"),this.overlayElement.classList.remove("revealed"),this.dispatchEvent(new CustomEvent("bc-hide",{bubbles:!0,detail:{revealed:!1}})))}updateOverlay(){const e=this.getAttribute("color")||"#000",t=this.getAttribute("opacity")||"0.9",n=this.getAttribute("speed")||"0.3s";this.style.setProperty("--bc-overlay-color",e),this.style.setProperty("--bc-overlay-opacity",t),this.style.setProperty("--bc-reveal-speed",n)}revealContent(){this.reveal()}hideContent(){this.hide()}isContentRevealed(){return this.isRevealed}}customElements.define("black-curtain",n);const s="black-curtain";export{s as BLACK_CURTAIN_MODULE};
