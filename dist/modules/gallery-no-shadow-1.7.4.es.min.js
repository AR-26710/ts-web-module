var t=Object.defineProperty,e=(e,n,s)=>(((e,n,s)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s})(e,"symbol"!=typeof n?n+"":n,s),s);class n extends HTMLElement{constructor(){super(),e(this,"currentIndex",0),e(this,"items",[]),e(this,"container",null),e(this,"track",null),e(this,"counter",null),e(this,"prevButton",null),e(this,"nextButton",null),e(this,"loadedIndices",new Set),e(this,"preloadDistance",6),this.render()}connectedCallback(){this.buildGallery(),this.addEventListeners()}render(){const t=document.createElement("style");t.textContent="\n      .gbns-gallery-container {\n        position: relative;\n        width: 100%;\n        max-width: 800px;\n        margin: 0 auto;\n        overflow: hidden;\n        border-radius: 8px;\n      }\n\n      .gbns-gallery-track {\n        display: flex;\n        transition: transform 0.3s ease;\n      }\n\n      .gbns-gallery-item {\n        min-width: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .gbns-gallery-item img {\n        max-width: 100%;\n        max-height: 600px;\n        object-fit: contain;\n        transition: opacity 0.3s ease;\n      }\n\n      .gbns-gallery-item img.loading {\n        opacity: 0.3;\n        background: #f5f5f5;\n      }\n\n      .gbns-gallery-item img.loaded {\n        opacity: 1;\n      }\n\n      .gbns-gallery-item img.error {\n        opacity: 1;\n        background: #ffebee;\n        color: #b71c1c;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n      .gbns-gallery-nav {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.5);\n        color: white;\n        border: none;\n        font-size: 24px;\n        padding: 12px 16px;\n        cursor: pointer;\n        transition: background 0.3s;\n        user-select: none;\n      }\n\n      .gbns-gallery-nav:hover {\n        background: rgba(0, 0, 0, 0.8);\n      }\n\n      .gbns-gallery-nav.disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n\n      .gbns-gallery-nav.prev {\n        left: 16px;\n      }\n\n      .gbns-gallery-nav.next {\n        right: 16px;\n      }\n\n      .gbns-gallery-counter {\n        position: absolute;\n        bottom: 16px;\n        right: 16px;\n        background: rgba(0, 0, 0, 0.5);\n        color: white;\n        padding: 4px 12px;\n        border-radius: 12px;\n        font-size: 14px;\n      }\n    ",this.container=document.createElement("div"),this.container.className="gbns-gallery-container",this.container.innerHTML='\n      <div class="gbns-gallery-track"></div>\n      <button class="gbns-gallery-nav prev">‹</button>\n      <button class="gbns-gallery-nav next">›</button>\n      <div class="gbns-gallery-counter"></div>\n    ',this.track=this.container.querySelector(".gbns-gallery-track"),this.counter=this.container.querySelector(".gbns-gallery-counter"),this.prevButton=this.container.querySelector(".gbns-gallery-nav.prev"),this.nextButton=this.container.querySelector(".gbns-gallery-nav.next"),this.appendChild(t),this.appendChild(this.container)}buildGallery(){this.track&&this.counter&&(this.items=Array.from(this.children).filter(t=>t!==this.container&&"STYLE"!==t.tagName),this.track.innerHTML="",this.items.forEach((t,e)=>{const n=document.createElement("div");if(n.className="gbns-gallery-item",n.dataset.index=e.toString(),"IMG"===t.tagName){const e=t,n=e.src;e.src="",e.dataset.src=n,e.classList.add("loading")}n.appendChild(t),this.track.appendChild(n)}),this.updateCounter(),this.loadVisibleImages())}addEventListeners(){var t,e;null==(t=this.prevButton)||t.addEventListener("click",()=>this.prev()),null==(e=this.nextButton)||e.addEventListener("click",()=>this.next()),window.addEventListener("resize",()=>this.loadVisibleImages()),window.addEventListener("scroll",()=>this.loadVisibleImages())}updateGallery(){this.track&&this.counter&&this.prevButton&&this.nextButton&&(this.track.style.transform=`translateX(-${100*this.currentIndex}%)`,0===this.currentIndex?this.prevButton.classList.add("disabled"):this.prevButton.classList.remove("disabled"),this.currentIndex===this.items.length-1?this.nextButton.classList.add("disabled"):this.nextButton.classList.remove("disabled"),this.updateCounter(),this.loadVisibleImages())}loadVisibleImages(){const t=Math.max(0,this.currentIndex-this.preloadDistance),e=Math.min(this.items.length-1,this.currentIndex+this.preloadDistance);for(let n=t;n<=e;n++)this.loadedIndices.has(n)||this.loadImageAtIndex(n)}loadImageAtIndex(t){if(t<0||t>=this.items.length)return;const e=this.items[t];if("IMG"===e.tagName){const n=e,s=n.dataset.src;if(s){const e=new Image;e.onload=()=>{n.src=s,n.classList.remove("loading"),n.classList.add("loaded"),this.loadedIndices.add(t)},e.onerror=()=>{n.classList.remove("loading"),n.classList.add("error")},e.src=s}}else if(e.querySelector("img")){const n=e.querySelector("img"),s=n.dataset.src;if(s){const e=new Image;e.onload=()=>{n.src=s,n.classList.remove("loading"),n.classList.add("loaded"),this.loadedIndices.add(t)},e.onerror=()=>{n.classList.remove("loading"),n.classList.add("error")},e.src=s}}}unloadImageAtIndex(t){if(t<0||t>=this.items.length)return;const e=this.items[t];if("IMG"===e.tagName){const n=e;n.dataset.src&&(n.src="",n.classList.remove("loaded","error"),n.classList.add("loading"),this.loadedIndices.delete(t))}else if(e.querySelector("img")){const n=e.querySelector("img");n.dataset.src&&(n.src="",n.classList.remove("loaded","error"),n.classList.add("loading"),this.loadedIndices.delete(t))}}updateCounter(){this.counter&&this.items.length>0&&(this.counter.textContent=`${this.currentIndex+1} / ${this.items.length}`)}prev(){this.currentIndex=(this.currentIndex-1+this.items.length)%this.items.length,this.updateGallery()}next(){this.currentIndex=(this.currentIndex+1)%this.items.length,this.updateGallery()}goTo(t){t>=0&&t<this.items.length&&(this.currentIndex=t,this.updateGallery())}}customElements.define("gallery-no-shadow",n);
