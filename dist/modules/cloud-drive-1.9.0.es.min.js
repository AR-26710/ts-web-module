var e=Object.defineProperty,t=(t,n,o)=>(((t,n,o)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o})(t,"symbol"!=typeof n?n+"":n,o),o);class n extends HTMLElement{constructor(){super(),t(this,"shadow"),this.shadow=this.attachShadow({mode:"open"}),this.render()}static get observedAttributes(){return["type","url","password","title"]}connectedCallback(){this.updateContent()}attributeChangedCallback(){this.updateContent()}fallbackCopyText(e,t){const n=t.textContent,o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o);try{o.focus(),o.select();document.execCommand("copy")?(t.textContent="提取码已复制",setTimeout(()=>{t.textContent=n},2e3)):(console.warn("复制失败，请手动复制提取码"),t.textContent="请手动复制",setTimeout(()=>{t.textContent=n},2e3))}catch(r){console.error("复制失败:",r),t.textContent="复制失败",setTimeout(()=>{t.textContent=n},2e3)}finally{document.body.removeChild(o)}}getDriveIcon(e){const t={"默认图标":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>'};return t[e]||t["默认图标"]}render(){const e=document.createElement("style");e.textContent="\n      :host { display: inline-block; }\n      .cd-drive-container {\n        display: flex;\n        align-items: center;\n        padding: 12px 16px;\n        border: 1px solid #e0e0e0;\n        border-radius: 8px;\n        transition: all 0.2s ease;\n        margin: 6px 0;\n      }\n      .cd-drive-container:hover {\n        background-color: #f5f5f5;\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n      }\n      .cd-drive-icon {\n        flex: 0 0 24px;\n        margin-right: 12px;\n        color: #3498db;\n      }\n      .cd-drive-info {\n        flex: 1;\n      }\n      .cd-drive-title {\n        font-weight: 500;\n        margin-bottom: 4px;\n        color: #2c3e50;\n        max-width: 90px;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .cd-drive-meta {\n        font-size: 0.85rem;\n        color: #7f8c8d;\n      }\n      .cd-drive-password {\n        margin-left: 8px;\n        padding: 2px 6px;\n        background-color: #ecf0f1;\n        border-radius: 4px;\n        font-size: 0.8rem;\n        cursor: pointer;\n      }\n      .cd-download-btn {\n        background-color: #e74c3c;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        padding: 6px 12px;\n        margin-left: 12px;\n        cursor: pointer;\n        transition: background-color 0.2s;\n        white-space: nowrap;\n        text-decoration: none;\n      }\n      .cd-download-btn:hover {\n        background-color: #c0392b;\n      }\n    ";const t=document.createElement("div");t.className="cd-drive-container",this.shadow.append(e,t)}updateContent(){const e=this.shadow.querySelector(".cd-drive-container"),t=this.getAttribute("type")||"默认网盘",n=this.getAttribute("url")||"#",o=this.getAttribute("password")||"",r=this.getAttribute("title")||"默认标题";e.innerHTML=`\n      <div class="cd-drive-icon">${this.getDriveIcon(t)}</div>\n      <div class="cd-drive-info">\n        <div class="cd-drive-title" title="${r}">${r}</div>\n        <div class="cd-drive-meta">\n          来源: ${t}\n          ${o?`<span class="cd-drive-password" data-password="${o}" title="点击复制提取码">提取码: ${o}</span>`:""}\n        </div>\n      </div>\n      <a href="${n}" class="cd-download-btn" target="_blank">下载</a>\n    `;const i=e.querySelector(".cd-drive-password");i&&i.addEventListener("click",()=>{const e=i.dataset.password;e&&(navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{const e=i.textContent;i.textContent="提取码已复制",setTimeout(()=>{i.textContent=e},2e3)}).catch(t=>{console.error("复制提取码失败:",t),this.fallbackCopyText(e,i)}):this.fallbackCopyText(e,i))})}}customElements.define("cloud-drive",n);const o="cloud-drive";export{o as CLOUD_DRIVE_MODULE};
